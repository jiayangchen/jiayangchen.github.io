---
layout: post
title: "识藏 —— MySQL 索引背后的隐藏之道"
subtitle: ""
date: 2019-03-13
author: "ChenJY"
header-img: "img/mysql.jpg"
catalog: true
tags: 
    - MySQL
---

### 索引的起源

> 我们为什么需要索引？

显而易见，使用索引可以加快我们检索数据的速度，生活中书籍的目录、图书馆里的各种书架编号、号码簿上的检索页等，都少不了索引的身影。回到计算机的世界，我们先举个最简单的例子，下图是一个有序递增的数组，里面包含十个元素，没有重复。

![](http://ww1.sinaimg.cn/large/c3beb895gy1g11kjzevqmj20kv06fjrg.jpg)

如果我想要查找元素 `24` ，该怎么做呢？第一想到的自然是遍历数组，如果数组长度为 `N` 那么算法的时间复杂度是 `O(N)`。有没有更快的办法呢？随即我们想到，鉴于数组已经有序了，我们还可以使用`二分查找`，每次都折半，时间复杂度降为 `O(logN)`。甚至于，我们还可以建立树形的数据结构来搜索，最常见的就是`二叉搜索树（BST）`。

![](http://ww1.sinaimg.cn/large/c3beb895gy1g11l4neihlj20q50fljs0.jpg)

到目前为止，好像一切都很容易，下面我们为之前的数据再增加一个关联的数据属性。

![](http://ww1.sinaimg.cn/large/c3beb895gy1g11lcbc2ixj20l507jdg2.jpg)

是不是有点眼熟，好像这种结构在哪里见过？想象一下，将这个数据集横向拓展，最后发现这其实就是数据库中一张表，它有两列，一列主键一列数字，其中第一行的数据就对应主键`（PK）`，每个主键关联一行数据记录。回想下我们刚刚做的努力，我们用主键的值来构建某种查询数据结构（例如 BST），但是树的节点除了保持主键的值之外，还保存了改行其他列的内容，因此当我们的查询命中某个主键之后，我们就能在该节点读取到这一行其他列的内容了，例如我们查询主键为 27 的节点，便可以顺势读到第二行的 7 这个数值。

上述的例子是很显而易见的，即使你没接触过索引，要设计一种加速查询的方法，也可能会想到这种方案，但是仅仅做到这些远远不够，数据库系统受庞大的数据量、查询条件的复杂性（等值、范围、模糊）的影响，其索引的实现复杂许多，**但是起源的哲学思想都是一样的**。

### 索引结构的要求

### MySQL 中的索引类型

### B+ 树索引

#### 聚簇索引
#### 二级索引

### 哈希索引

### 






